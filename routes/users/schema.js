// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// schema.js
// User schema.
//
// Created 22nd Nov 2022
// Andy Chadbourne
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Version history
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// 1.0.0, 22/11/2022, Andy Chadbourne, original release.
// 1.0.1, 12/09/2022, Andy Chadbourne, added communityEvents to settings/ui.
// 1.0.2, 23/02/2023, Andy Chadbourne, added showExpired to settings/ui objects.
// 1.0.3, 14/03/2024, Andy Chadbourne, v2.0 API release.
// 2.0.0, 29/08/2024, Andy Chadbourne, v3.0 API release.

// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
import mongoose from 'mongoose'

export const rawSchema = {
    email: { type: String, required: true, unique: true },
    passwordHash: { type: String, required: true },

    refreshToken: { type: String },

    firstName: { type: String },
    lastName: { type: String },

    options: {
        isEnabled: { type: Boolean, default: true },
        isSuperAdmin: { type: Boolean }
    },

    schemaVersion: { type: String, required: true, default: '2.0.0' }
}

// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Schema
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
const UserSchema = new mongoose.Schema(rawSchema, { timestamps: true })

export default mongoose.model('user', UserSchema, 'users')
